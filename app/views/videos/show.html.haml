%article.video
  .container
    .row
      .video_large_cover.col-sm-7.col-sm-offset-1
        %img{:src => "#{@video.large_cover_url}"}
      .video_info.col-sm-3
        %header
          %h3= @video.title
          %span Rating: #{@video.rating}
        %p= @video.description
        .actions
          %a.btn.btn-primary(href="#{@video.video_url}") Watch Now
          = link_to('+ My Queue', video_queue_items_path(@video), method: :post, class: 'btn btn-default') unless @video.on_queue?(current_user)

%section.reviews.container
  .row
    .col-sm-10.col-sm-offset-1
      - unless @video.reviewed?(current_user)
        = bootstrap_form_for [@video, @review] do |f|
          %fieldset
            .row
              .col-sm-3
                .form-group
                = f.select :rating, options_for_select(rating_option), {}, label: "Rate this Video"
            .row
              .col-sm-8
                .form-group
                = f.text_area :body, rows: 6, label: "Write Review"
          %fieldset.actions.clearfix
            %input(type="submit" value="Submit" class="btn")
            = link_to 'Cancel', video_path(@video)
      %header
        %h3 User Reviews (#{@video.reviews.count})
      %ul
        - @video.reviews.each do |review|
          %article.review
            %li.row
              .col-sm-2
                %span Rating: #{rating(review)}
                %p
                  by
                  = link_to review.user.full_name, review.user
              .col-sm-8
                %p #{review_or_not_entered(review)}
